# caic API Reference

<!-- Code generated by gen-api-sdk; DO NOT EDIT. -->

RESTful JSON API served at `/api/v1/`. SSE endpoints stream newline-delimited JSON events.

## Server

| Method | Path | Request | Response |
|--------|------|---------|----------|
| GET | `/api/v1/server/config` |  | `Config` |
| GET | `/api/v1/server/harnesses` |  | `HarnessInfo[]` |
| GET | `/api/v1/server/repos` |  | `Repo[]` |
| GET | `/api/v1/server/tasks/events` |  | `Task[]` SSE |
| GET | `/api/v1/server/usage/events` |  | `UsageResp` SSE |

## Tasks

| Method | Path | Request | Response |
|--------|------|---------|----------|
| GET | `/api/v1/tasks` |  | `Task[]` |
| POST | `/api/v1/tasks` | `CreateTaskReq` | `CreateTaskResp` |
| GET | `/api/v1/tasks/{id}/raw_events` |  | `ClaudeEventMessage` SSE |
| GET | `/api/v1/tasks/{id}/events` |  | `EventMessage` SSE |
| POST | `/api/v1/tasks/{id}/input` | `InputReq` | `StatusResp` |
| POST | `/api/v1/tasks/{id}/restart` | `RestartReq` | `StatusResp` |
| POST | `/api/v1/tasks/{id}/terminate` |  | `StatusResp` |
| POST | `/api/v1/tasks/{id}/sync` | `SyncReq` | `SyncResp` |

## Usage

| Method | Path | Request | Response |
|--------|------|---------|----------|
| GET | `/api/v1/usage` |  | `UsageResp` |

## Voice

| Method | Path | Request | Response |
|--------|------|---------|----------|
| GET | `/api/v1/voice/token` |  | `VoiceTokenResp` |

## Errors

All errors return:

```json
{
  "error": { "code": "<CODE>", "message": "..." },
  "details": { ... }
}
```

| HTTP | Code |
|------|------|
| 400 | `BAD_REQUEST` |
| 404 | `NOT_FOUND` |
| 409 | `CONFLICT` |
| 500 | `INTERNAL_ERROR` |

## Types

### Config

| Field | Type | Required |
|-------|------|----------|
| `tailscaleAvailable` | `boolean` | yes |
| `usbAvailable` | `boolean` | yes |
| `displayAvailable` | `boolean` | yes |

### HarnessInfo

| Field | Type | Required |
|-------|------|----------|
| `name` | `string` | yes |
| `models` | `string[]` | yes |
| `supportsImages` | `boolean` | yes |

### Repo

| Field | Type | Required |
|-------|------|----------|
| `path` | `string` | yes |
| `baseBranch` | `string` | yes |
| `repoURL` | `string` |  |

### DiffFileStat

| Field | Type | Required |
|-------|------|----------|
| `path` | `string` | yes |
| `added` | `number` | yes |
| `deleted` | `number` | yes |
| `binary` | `boolean` |  |

### Task

| Field | Type | Required |
|-------|------|----------|
| `id` | `string` | yes |
| `initialPrompt` | `string` | yes |
| `title` | `string` | yes |
| `repo` | `string` | yes |
| `repoURL` | `string` |  |
| `branch` | `string` | yes |
| `container` | `string` | yes |
| `state` | `string` | yes |
| `stateUpdatedAt` | `number` | yes |
| `diffStat` | `DiffFileStat[]` |  |
| `costUSD` | `number` | yes |
| `duration` | `number` | yes |
| `numTurns` | `number` | yes |
| `cumulativeInputTokens` | `number` | yes |
| `cumulativeOutputTokens` | `number` | yes |
| `cumulativeCacheCreationInputTokens` | `number` | yes |
| `cumulativeCacheReadInputTokens` | `number` | yes |
| `activeInputTokens` | `number` | yes |
| `activeCacheReadTokens` | `number` | yes |
| `error` | `string` |  |
| `result` | `string` |  |
| `harness` | `string` | yes |
| `model` | `string` |  |
| `agentVersion` | `string` |  |
| `sessionID` | `string` |  |
| `containerUptimeMs` | `number` |  |
| `inPlanMode` | `boolean` |  |
| `tailscale` | `string` |  |
| `usb` | `boolean` |  |
| `display` | `boolean` |  |

### ImageData

| Field | Type | Required |
|-------|------|----------|
| `mediaType` | `string` | yes |
| `data` | `string` | yes |

### Prompt

| Field | Type | Required |
|-------|------|----------|
| `text` | `string` | yes |
| `images` | `ImageData[]` |  |

### CreateTaskReq

| Field | Type | Required |
|-------|------|----------|
| `initialPrompt` | `Prompt` | yes |
| `repo` | `string` | yes |
| `model` | `string` |  |
| `harness` | `string` | yes |
| `image` | `string` |  |
| `tailscale` | `boolean` |  |
| `usb` | `boolean` |  |
| `display` | `boolean` |  |

### CreateTaskResp

| Field | Type | Required |
|-------|------|----------|
| `status` | `string` | yes |
| `id` | `string` | yes |

### ClaudeEventInit

| Field | Type | Required |
|-------|------|----------|
| `model` | `string` | yes |
| `agentVersion` | `string` | yes |
| `sessionID` | `string` | yes |
| `tools` | `string[]` | yes |
| `cwd` | `string` | yes |

### ClaudeEventText

| Field | Type | Required |
|-------|------|----------|
| `text` | `string` | yes |

### ClaudeEventTextDelta

| Field | Type | Required |
|-------|------|----------|
| `text` | `string` | yes |

### ClaudeEventToolUse

| Field | Type | Required |
|-------|------|----------|
| `toolUseID` | `string` | yes |
| `name` | `string` | yes |
| `input` | `object` | yes |

### ClaudeEventToolResult

| Field | Type | Required |
|-------|------|----------|
| `toolUseID` | `string` | yes |
| `duration` | `number` | yes |
| `error` | `string` |  |

### ClaudeAskOption

| Field | Type | Required |
|-------|------|----------|
| `label` | `string` | yes |
| `description` | `string` |  |

### ClaudeAskQuestion

| Field | Type | Required |
|-------|------|----------|
| `question` | `string` | yes |
| `header` | `string` |  |
| `options` | `ClaudeAskOption[]` | yes |
| `multiSelect` | `boolean` |  |

### ClaudeEventAsk

| Field | Type | Required |
|-------|------|----------|
| `toolUseID` | `string` | yes |
| `questions` | `ClaudeAskQuestion[]` | yes |

### ClaudeEventUsage

| Field | Type | Required |
|-------|------|----------|
| `inputTokens` | `number` | yes |
| `outputTokens` | `number` | yes |
| `cacheCreationInputTokens` | `number` | yes |
| `cacheReadInputTokens` | `number` | yes |
| `serviceTier` | `string` |  |
| `model` | `string` | yes |

### ClaudeEventResult

| Field | Type | Required |
|-------|------|----------|
| `subtype` | `string` | yes |
| `isError` | `boolean` | yes |
| `result` | `string` | yes |
| `diffStat` | `DiffFileStat[]` |  |
| `totalCostUSD` | `number` | yes |
| `duration` | `number` | yes |
| `durationAPI` | `number` | yes |
| `numTurns` | `number` | yes |
| `usage` | `ClaudeEventUsage` | yes |

### ClaudeEventSystem

| Field | Type | Required |
|-------|------|----------|
| `subtype` | `string` | yes |

### ClaudeEventUserInput

| Field | Type | Required |
|-------|------|----------|
| `text` | `string` | yes |
| `images` | `ImageData[]` |  |

### ClaudeTodoItem

| Field | Type | Required |
|-------|------|----------|
| `content` | `string` | yes |
| `status` | `string` | yes |
| `activeForm` | `string` |  |

### ClaudeEventTodo

| Field | Type | Required |
|-------|------|----------|
| `toolUseID` | `string` | yes |
| `todos` | `ClaudeTodoItem[]` | yes |

### ClaudeEventDiffStat

| Field | Type | Required |
|-------|------|----------|
| `diffStat` | `DiffFileStat[]` |  |

### ClaudeEventMessage

| Field | Type | Required |
|-------|------|----------|
| `kind` | `string` | yes |
| `ts` | `number` | yes |
| `init` | `ClaudeEventInit` |  |
| `text` | `ClaudeEventText` |  |
| `textDelta` | `ClaudeEventTextDelta` |  |
| `toolUse` | `ClaudeEventToolUse` |  |
| `toolResult` | `ClaudeEventToolResult` |  |
| `ask` | `ClaudeEventAsk` |  |
| `usage` | `ClaudeEventUsage` |  |
| `result` | `ClaudeEventResult` |  |
| `system` | `ClaudeEventSystem` |  |
| `userInput` | `ClaudeEventUserInput` |  |
| `todo` | `ClaudeEventTodo` |  |
| `diffStat` | `ClaudeEventDiffStat` |  |

### EventInit

| Field | Type | Required |
|-------|------|----------|
| `model` | `string` | yes |
| `agentVersion` | `string` | yes |
| `sessionID` | `string` | yes |
| `tools` | `string[]` | yes |
| `cwd` | `string` | yes |
| `harness` | `string` | yes |

### EventText

| Field | Type | Required |
|-------|------|----------|
| `text` | `string` | yes |

### EventTextDelta

| Field | Type | Required |
|-------|------|----------|
| `text` | `string` | yes |

### EventToolUse

| Field | Type | Required |
|-------|------|----------|
| `toolUseID` | `string` | yes |
| `name` | `string` | yes |
| `input` | `object` | yes |

### EventToolResult

| Field | Type | Required |
|-------|------|----------|
| `toolUseID` | `string` | yes |
| `duration` | `number` | yes |
| `error` | `string` |  |

### AskOption

| Field | Type | Required |
|-------|------|----------|
| `label` | `string` | yes |
| `description` | `string` |  |

### AskQuestion

| Field | Type | Required |
|-------|------|----------|
| `question` | `string` | yes |
| `header` | `string` |  |
| `options` | `AskOption[]` | yes |
| `multiSelect` | `boolean` |  |

### EventAsk

| Field | Type | Required |
|-------|------|----------|
| `toolUseID` | `string` | yes |
| `questions` | `AskQuestion[]` | yes |

### EventUsage

| Field | Type | Required |
|-------|------|----------|
| `inputTokens` | `number` | yes |
| `outputTokens` | `number` | yes |
| `cacheCreationInputTokens` | `number` | yes |
| `cacheReadInputTokens` | `number` | yes |
| `serviceTier` | `string` |  |
| `model` | `string` | yes |

### EventResult

| Field | Type | Required |
|-------|------|----------|
| `subtype` | `string` | yes |
| `isError` | `boolean` | yes |
| `result` | `string` | yes |
| `diffStat` | `DiffFileStat[]` |  |
| `totalCostUSD` | `number` | yes |
| `duration` | `number` | yes |
| `durationAPI` | `number` | yes |
| `numTurns` | `number` | yes |
| `usage` | `EventUsage` | yes |

### EventSystem

| Field | Type | Required |
|-------|------|----------|
| `subtype` | `string` | yes |

### EventUserInput

| Field | Type | Required |
|-------|------|----------|
| `text` | `string` | yes |
| `images` | `ImageData[]` |  |

### TodoItem

| Field | Type | Required |
|-------|------|----------|
| `content` | `string` | yes |
| `status` | `string` | yes |
| `activeForm` | `string` |  |

### EventTodo

| Field | Type | Required |
|-------|------|----------|
| `toolUseID` | `string` | yes |
| `todos` | `TodoItem[]` | yes |

### EventDiffStat

| Field | Type | Required |
|-------|------|----------|
| `diffStat` | `DiffFileStat[]` |  |

### EventMessage

| Field | Type | Required |
|-------|------|----------|
| `kind` | `string` | yes |
| `ts` | `number` | yes |
| `init` | `EventInit` |  |
| `text` | `EventText` |  |
| `textDelta` | `EventTextDelta` |  |
| `toolUse` | `EventToolUse` |  |
| `toolResult` | `EventToolResult` |  |
| `ask` | `EventAsk` |  |
| `usage` | `EventUsage` |  |
| `result` | `EventResult` |  |
| `system` | `EventSystem` |  |
| `userInput` | `EventUserInput` |  |
| `todo` | `EventTodo` |  |
| `diffStat` | `EventDiffStat` |  |

### InputReq

| Field | Type | Required |
|-------|------|----------|
| `prompt` | `Prompt` | yes |

### StatusResp

| Field | Type | Required |
|-------|------|----------|
| `status` | `string` | yes |

### RestartReq

| Field | Type | Required |
|-------|------|----------|
| `prompt` | `Prompt` | yes |

### SyncReq

| Field | Type | Required |
|-------|------|----------|
| `force` | `boolean` |  |
| `target` | `string` |  |

### SafetyIssue

| Field | Type | Required |
|-------|------|----------|
| `file` | `string` | yes |
| `kind` | `string` | yes |
| `detail` | `string` | yes |

### SyncResp

| Field | Type | Required |
|-------|------|----------|
| `status` | `string` | yes |
| `branch` | `string` |  |
| `diffStat` | `DiffFileStat[]` |  |
| `safetyIssues` | `SafetyIssue[]` |  |

### UsageWindow

| Field | Type | Required |
|-------|------|----------|
| `utilization` | `number` | yes |
| `resetsAt` | `string` | yes |

### ExtraUsage

| Field | Type | Required |
|-------|------|----------|
| `isEnabled` | `boolean` | yes |
| `monthlyLimit` | `number` | yes |
| `usedCredits` | `number` | yes |
| `utilization` | `number` | yes |

### UsageResp

| Field | Type | Required |
|-------|------|----------|
| `fiveHour` | `UsageWindow` | yes |
| `sevenDay` | `UsageWindow` | yes |
| `extraUsage` | `ExtraUsage` | yes |

### VoiceTokenResp

| Field | Type | Required |
|-------|------|----------|
| `token` | `string` | yes |
| `expiresAt` | `string` | yes |
| `ephemeral` | `boolean` | yes |

