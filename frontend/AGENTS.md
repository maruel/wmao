# Frontend Guidelines

SolidJS web UI for caic. Built with Vite, outputs to `../backend/frontend/dist/`.

## Linting

**Always** run `make lint-frontend` after any frontend file change. Do not skip this step.

## Stack

- SolidJS for reactivity
- Vite for bundling
- TypeScript with strict mode
- ESLint with solid plugin
- Vitest + @solidjs/testing-library for unit tests

## Testing

Unit tests use Vitest with jsdom and `@solidjs/testing-library`. Test files
live next to their source as `*.test.tsx` or `*.test.ts`.

```bash
pnpm test           # single run
pnpm test:watch     # watch mode
```

- Render components with `render(() => <Comp />)`.
- Prefer role-based queries (`getByRole`, `getByText`) over test IDs.
- Use `@testing-library/user-event` for interactions.
- `@testing-library/jest-dom` matchers are available globally.

## Development

```bash
make frontend-dev   # Vite dev server on :5173, proxies /api to :8080
make dev            # Build + run Go server on :8080
```

<!-- BEGIN FILE INDEX -->
## File Index

Autogenerated file index based on first-line comments.

- `public/sw.js`: Service worker for caic PWA.
- `src/App.tsx`: Main application component for caic web UI.
- `src/AutoResizeTextarea.test.tsx`: Tests for the AutoResizeTextarea component.
- `src/AutoResizeTextarea.tsx`: Auto-resizing textarea that starts as a single line and expands vertically.
- `src/PromptInput.test.tsx`: Tests for the PromptInput component.
- `src/PromptInput.tsx`: Reusable prompt input with image support: paste, drag & drop, attach button, and preview strip.
- `src/TaskItemSummary.tsx`: Compact summary card for a single task, used in the sidebar task list.
- `src/TaskList.tsx`: Sidebar task list with collapsible panel and sorted task cards.
- `src/TaskView.tsx`: TaskView renders the real-time agent output stream for a single task.
- `src/TodoPanel.tsx`: TodoPanel renders the agent's current todo list from TodoWrite events.
- `src/Tooltip.tsx`: Tooltip: hover on desktop, tap-to-toggle on mobile.
- `src/UsageBadges.tsx`: Usage badges showing API utilization with color-coded thresholds.
- `src/css.d.ts`: Type declaration for CSS modules.
- `src/images.ts`: Helpers for converting image files to base64 ImageData payloads.
- `src/notifications.ts`: Browser notification helpers for alerting when agents need attention.
- `src/test-setup.ts`: Global test setup for vitest with SolidJS testing-library.
<!-- END FILE INDEX -->
