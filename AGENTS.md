# AGENTS.md

Development guidelines for the caic project.

For specific guidelines, see:
- [CI/CD Guidelines](.github/AGENTS.md) - Read before editing GitHub Actions
- [Backend Guidelines](backend/AGENTS.md) - Read before editing Go code in backend/
- [Frontend Guidelines](frontend/AGENTS.md) - Read before editing frontend code

## Project Overview

caic manages multiple coding agents in parallel. Each task runs in an isolated [md](https://github.com/maruel/md) container with Claude Code communicating via streaming JSON over SSH.

### Documentation Changes

- **Do NOT** create a markdown file listing changes you made.
- **Always update the purpose comment** at the beginning of a source file when
  the code's purpose changes. This comment is used to generate the file index
  in `AGENTS.md`.

### md Containers

`md start`, `md diff`, `md pull`, and `md kill` operate on the **current git
branch**. The working tree must be checked out to the task's branch before
calling any `md` command for that task.

### Professionalism

After making changes, lint only the areas you touched:

```bash
# Go/frontend/Python changes:
make lint build test

# Android changes:
make lint-android android-build android-test
```

### Make Targets

```
make build          # Build Go server + frontend (runs types, docs, pnpm build, go install)
make dev            # Build and run server on :8080
make frontend-dev   # Run Vite frontend dev server on :5173
make types          # Generate types (go generate → tygo + gen-api-client)
make docs           # Update AGENTS.md file indexes
make test           # Go unit tests with coverage
make e2e            # Playwright end-to-end tests
make lint           # Run linters (Go + frontend + Python + binaries)
make lint-all       # Run all linters including Android
make lint-fix       # Auto-fix all linters
make lint-binaries  # Check for unexpected binaries/executables in repo
make android-build  # Build Android app (debug APK)
make android-push   # Build and install APK on connected device
make android-test   # Run Android unit tests
make lint-android   # Run Android linters (detekt + Android lint)
```

<!-- BEGIN FILE INDEX -->
## File Index

Autogenerated file index based on first-line comments.

- `README.md`: caic
- `android/detekt.yml`: Detekt configuration for caic Android project.
- `android/docs/app-design.md`: Android App Design
- `android/docs/sdk-design.md`: Kotlin SDK Design
- `docs/CLAUDE_CODE_COMMANDS.md`: Claude Code Built-in Commands — CAIC Frontend Support
- `docs/REQUIREMENTS.md`: caic - Requirements
- `docs/codex-backend.md`: Codex CLI Backend — Integration Spec
- `docs/multi-agent.md`: Multi-Agent Abstraction Plan for CAIC
- `e2e/helpers.ts`: Shared e2e test helpers: typed API client and utilities.
- `e2e/tests/error-handling.spec.ts`: Error handling and edge case tests.
- `e2e/tests/multi-turn.spec.ts`: Multi-turn interaction and concurrent task tests.
- `e2e/tests/repos-api.spec.ts`: API-only tests for repos and harnesses endpoints.
- `e2e/tests/task-lifecycle.spec.ts`: End-to-end tests for the task lifecycle using a fake backend.
- `e2e/tests/tasks-api.spec.ts`: API-only tests for the task lifecycle (no browser UI).
- `scripts/lint_binaries.py`: Lint for unexpected binary or executable files in the repository.
- `sdk/api.gen.ts`: Code generated by gen-api-client. DO NOT EDIT.
- `sdk/types.gen.ts`: Code generated by tygo. DO NOT EDIT.
<!-- END FILE INDEX -->
