(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const Rt=!1,Ft=(t,e)=>t===e,Dt=Symbol("solid-track"),at={equals:Ft};let Ct=Pt;const Z=1,ut=2,At={owned:null,cleanups:null,context:null,owner:null};var E=null;let gt=null,Ut=null,A=null,P=null,K=null,ht=0;function ot(t,e){const n=A,s=E,r=t.length===0,i=e===void 0?s:e,a=r?At:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=r?t:()=>t(()=>Q(()=>rt(a)));E=a,A=null;try{return lt(l,!0)}finally{A=n,E=s}}function W(t,e){e=e?Object.assign({},at,e):at;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),Bt(n,r));return[It.bind(n),s]}function $(t,e,n){const s=pt(t,e,!1,Z);it(s)}function Et(t,e,n){Ct=Ht;const s=pt(t,e,!1,Z);s.user=!0,K?K.push(s):it(s)}function j(t,e,n){n=n?Object.assign({},at,n):at;const s=pt(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,it(s),It.bind(s)}function Q(t){if(A===null)return t();const e=A;A=null;try{return t()}finally{A=e}}function jt(t){Et(()=>Q(t))}function Lt(t){return E===null||(E.cleanups===null?E.cleanups=[t]:E.cleanups.push(t)),t}function Vt(t){const e=j(t),n=j(()=>vt(e()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}function It(){if(this.sources&&this.state)if(this.state===Z)it(this);else{const t=P;P=null,lt(()=>ft(this),!1),P=t}if(A){const t=this.observers?this.observers.length:0;A.sources?(A.sources.push(this),A.sourceSlots.push(t)):(A.sources=[this],A.sourceSlots=[t]),this.observers?(this.observers.push(A),this.observerSlots.push(A.sources.length-1)):(this.observers=[A],this.observerSlots=[A.sources.length-1])}return this.value}function Bt(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&lt(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],a=gt&&gt.running;a&&gt.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?P.push(i):K.push(i),i.observers&&Nt(i)),a||(i.state=Z)}if(P.length>1e6)throw P=[],new Error},!1)),e}function it(t){if(!t.fn)return;rt(t);const e=ht;qt(t,t.value,e)}function qt(t,e,n){let s;const r=E,i=A;A=E=t;try{s=t.fn(e)}catch(a){return t.pure&&(t.state=Z,t.owned&&t.owned.forEach(rt),t.owned=null),t.updatedAt=n+1,Mt(a)}finally{A=i,E=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Bt(t,s):t.value=s,t.updatedAt=n)}function pt(t,e,n,s=Z,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:E,context:E?E.context:null,pure:n};return E===null||E!==At&&(E.owned?E.owned.push(i):E.owned=[i]),i}function ct(t){if(t.state===0)return;if(t.state===ut)return ft(t);if(t.suspense&&Q(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<ht);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===Z)it(t);else if(t.state===ut){const s=P;P=null,lt(()=>ft(t,e[0]),!1),P=s}}function lt(t,e){if(P)return t();let n=!1;e||(P=[]),K?n=!0:K=[],ht++;try{const s=t();return Wt(n),s}catch(s){n||(K=null),P=null,Mt(s)}}function Wt(t){if(P&&(Pt(P),P=null),t)return;const e=K;K=null,e.length&&lt(()=>Ct(e),!1)}function Pt(t){for(let e=0;e<t.length;e++)ct(t[e])}function Ht(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:ct(s)}for(e=0;e<n;e++)ct(t[e])}function ft(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===Z?s!==e&&(!s.updatedAt||s.updatedAt<ht)&&ct(s):r===ut&&ft(s,e)}}}function Nt(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=ut,n.pure?P.push(n):K.push(n),n.observers&&Nt(n))}}function rt(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),a=n.observerSlots.pop();s<r.length&&(i.sourceSlots[a]=s,r[s]=i,n.observerSlots[s]=a)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)rt(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)rt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Jt(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Mt(t,e=E){throw Jt(t)}function vt(t){if(typeof t=="function"&&!t.length)return vt(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=vt(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}const Kt=Symbol("fallback");function kt(t){for(let e=0;e<t.length;e++)t[e]()}function Qt(t,e,n={}){let s=[],r=[],i=[],a=0,l=e.length>1?[]:null;return Lt(()=>kt(i)),()=>{let c=t()||[],f=c.length,g,u;return c[Dt],Q(()=>{let B,M,F,T,b,_,k,C,p;if(f===0)a!==0&&(kt(i),i=[],s=[],r=[],a=0,l&&(l=[])),n.fallback&&(s=[Kt],r[0]=ot(L=>(i[0]=L,n.fallback())),a=1);else if(a===0){for(r=new Array(f),u=0;u<f;u++)s[u]=c[u],r[u]=ot(N);a=f}else{for(F=new Array(f),T=new Array(f),l&&(b=new Array(f)),_=0,k=Math.min(a,f);_<k&&s[_]===c[_];_++);for(k=a-1,C=f-1;k>=_&&C>=_&&s[k]===c[C];k--,C--)F[C]=r[k],T[C]=i[k],l&&(b[C]=l[k]);for(B=new Map,M=new Array(C+1),u=C;u>=_;u--)p=c[u],g=B.get(p),M[u]=g===void 0?-1:g,B.set(p,u);for(g=_;g<=k;g++)p=s[g],u=B.get(p),u!==void 0&&u!==-1?(F[u]=r[g],T[u]=i[g],l&&(b[u]=l[g]),u=M[u],B.set(p,u)):i[g]();for(u=_;u<f;u++)u in F?(r[u]=F[u],i[u]=T[u],l&&(l[u]=b[u],l[u](u))):r[u]=ot(N);r=r.slice(0,a=f),s=c.slice(0)}return r});function N(B){if(i[u]=B,l){const[M,F]=W(u);return l[u]=F,e(c[u],M)}return e(c[u])}}}function y(t,e){return Q(()=>t(e||{}))}const Ot=t=>`Stale read from <${t}>.`;function et(t){const e="fallback"in t&&{fallback:()=>t.fallback};return j(Qt(()=>t.each,t.children,e||void 0))}function O(t){const e=t.keyed,n=j(()=>t.when,void 0,void 0),s=e?n:j(n,void 0,{equals:(r,i)=>!r==!i});return j(()=>{const r=s();if(r){const i=t.children;return typeof i=="function"&&i.length>0?Q(()=>i(e?r:()=>{if(!Q(s))throw Ot("Show");return n()})):i}return t.fallback},void 0,void 0)}function Xt(t){const e=Vt(()=>t.children),n=j(()=>{const s=e(),r=Array.isArray(s)?s:[s];let i=()=>{};for(let a=0;a<r.length;a++){const l=a,c=r[a],f=i,g=j(()=>f()?void 0:c.when,void 0,void 0),u=c.keyed?g:j(g,void 0,{equals:(N,B)=>!N==!B});i=()=>f()||(u()?[l,g,c]:void 0)}return i});return j(()=>{const s=n()();if(!s)return t.fallback;const[r,i,a]=s,l=a.children;return typeof l=="function"&&l.length>0?Q(()=>l(a.keyed?i():()=>{var f;if(((f=Q(n)())==null?void 0:f[0])!==r)throw Ot("Match");return i()})):l},void 0,void 0)}function st(t){return t}const Yt=t=>j(()=>t());function Zt(t,e,n){let s=n.length,r=e.length,i=s,a=0,l=0,c=e[r-1].nextSibling,f=null;for(;a<r||l<i;){if(e[a]===n[l]){a++,l++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===a){const g=i<s?l?n[l-1].nextSibling:n[i-l]:c;for(;l<i;)t.insertBefore(n[l++],g)}else if(i===l)for(;a<r;)(!f||!f.has(e[a]))&&e[a].remove(),a++;else if(e[a]===n[i-1]&&n[l]===e[r-1]){const g=e[--r].nextSibling;t.insertBefore(n[l++],e[a++].nextSibling),t.insertBefore(n[--i],g),e[r]=n[i]}else{if(!f){f=new Map;let u=l;for(;u<i;)f.set(n[u],u++)}const g=f.get(e[a]);if(g!=null)if(l<g&&g<i){let u=a,N=1,B;for(;++u<r&&u<i&&!((B=f.get(e[u]))==null||B!==g+N);)N++;if(N>g-l){const M=e[a];for(;l<g;)t.insertBefore(n[l++],M)}else t.replaceChild(n[l++],e[a++])}else a++;else e[a++].remove()}}}const wt="_$DX_DELEGATE";function zt(t,e,n,s={}){let r;return ot(i=>{r=i,e===document?t():h(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function x(t,e,n,s){let r;const i=()=>{const l=document.createElement("template");return l.innerHTML=t,l.content.firstChild},a=()=>(r||(r=i())).cloneNode(!0);return a.cloneNode=a,a}function Gt(t,e=window.document){const n=e[wt]||(e[wt]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,ee))}}function d(t,e){e==null?t.removeAttribute("class"):t.className=e}function te(t,e,n){n!=null?t.style.setProperty(e,n):t.style.removeProperty(e)}function h(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return dt(t,e,s,n);$(r=>dt(t,e(),r,n),s)}function ee(t){let e=t.target;const n=`$$${t.type}`,s=t.target,r=t.currentTarget,i=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),a=()=>{const c=e[n];if(c&&!e.disabled){const f=e[`${n}Data`];if(f!==void 0?c.call(e,f,t):c.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},l=()=>{for(;a()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const c=t.composedPath();i(c[0]);for(let f=0;f<c.length-2&&(e=c[f],!!a());f++){if(e._$host){e=e._$host,l();break}if(e.parentNode===r)break}}else l();i(s)}function dt(t,e,n,s,r){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,a=s!==void 0;if(t=a&&n[0]&&n[0].parentNode||t,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===n))return n;if(a){let l=n[0];l&&l.nodeType===3?l.data!==e&&(l.data=e):l=document.createTextNode(e),n=tt(t,n,s,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||i==="boolean")n=tt(t,n,s);else{if(i==="function")return $(()=>{let l=e();for(;typeof l=="function";)l=l();n=dt(t,l,n,s)}),()=>n;if(Array.isArray(e)){const l=[],c=n&&Array.isArray(n);if(bt(l,e,n,r))return $(()=>n=dt(t,l,n,s,!0)),()=>n;if(l.length===0){if(n=tt(t,n,s),a)return n}else c?n.length===0?St(t,l,s):Zt(t,n,l):(n&&tt(t),St(t,l));n=l}else if(e.nodeType){if(Array.isArray(n)){if(a)return n=tt(t,n,s,e);tt(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function bt(t,e,n,s){let r=!1;for(let i=0,a=e.length;i<a;i++){let l=e[i],c=n&&n[t.length],f;if(!(l==null||l===!0||l===!1))if((f=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))r=bt(t,l,c)||r;else if(f==="function")if(s){for(;typeof l=="function";)l=l();r=bt(t,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||r}else t.push(l),r=!0;else{const g=String(l);c&&c.nodeType===3&&c.data===g?t.push(c):t.push(document.createTextNode(g))}}return r}function St(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function tt(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const l=e[a];if(r!==l){const c=l.parentNode===t;!i&&!a?c?t.replaceChild(r,l):t.insertBefore(r,n):c&&l.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}class ne extends Error{constructor(e,n,s){super(n),this.status=e,this.code=n,this.details=s}}async function H(t,e,n){const s={method:t,headers:{"Content-Type":"application/json"}};n!==void 0&&(s.body=JSON.stringify(n));const r=await fetch(e,s);if(!r.ok){const i=await r.json();throw new ne(r.status,i.error.code,i.details)}return r.json()}function se(){return H("GET","/api/v1/repos")}function re(){return H("GET","/api/v1/tasks")}function ie(t){return H("POST","/api/v1/tasks",t)}function le(t){return new EventSource(`/api/v1/tasks/${t}/events`)}function oe(t,e){return H("POST",`/api/v1/tasks/${t}/input`,e)}function ae(t){return H("POST",`/api/v1/tasks/${t}/finish`)}function ue(t){return H("POST",`/api/v1/tasks/${t}/end`)}function ce(t){return H("POST",`/api/v1/tasks/${t}/pull`)}function fe(t){return H("POST",`/api/v1/tasks/${t}/push`)}function de(t){return H("POST",`/api/v1/tasks/${t}/reconnect`)}function he(t){return H("POST",`/api/v1/tasks/${t}/takeover`)}const ge="_container_1lvm8_3",_e="_header_1lvm8_9",me="_closeBtn_1lvm8_20",ve="_messageArea_1lvm8_24",be="_placeholder_1lvm8_35",pe="_inputForm_1lvm8_39",ye="_textInput_1lvm8_45",$e="_btn_1lvm8_50",ke="_btnGray_1lvm8_58",we="_btnGreen_1lvm8_62",Se="_btnRed_1lvm8_66",xe="_systemInit_1lvm8_70",Te="_systemMsg_1lvm8_76",Ce="_assistantMsg_1lvm8_82",Ae="_textBlock_1lvm8_86",Ee="_result_1lvm8_91",Le="_resultSuccess_1lvm8_98",Ie="_resultError_1lvm8_102",Be="_resultMeta_1lvm8_106",Pe="_resultText_1lvm8_112",Ne="_toolResult_1lvm8_117",Me="_toolGroup_1lvm8_127",Oe="_toolGroupInner_1lvm8_140",Ge="_toolBlock_1lvm8_144",Re="_toolBlockPre_1lvm8_156",v={container:ge,header:_e,closeBtn:me,messageArea:ve,placeholder:be,inputForm:pe,textInput:ye,btn:$e,btnGray:ke,btnGreen:we,btnRed:Se,systemInit:xe,systemMsg:Te,assistantMsg:Ce,textBlock:Ae,result:Ee,resultSuccess:Le,resultError:Ie,resultMeta:Be,resultText:Pe,toolResult:Ne,toolGroup:Me,toolGroupInner:Oe,toolBlock:Ge,toolBlockPre:Re};var Fe=x("<p>Waiting for agent output..."),De=x("<button type=button>Finish"),Ue=x("<button type=button>Reconnect"),je=x("<button type=button>Takeover"),Ve=x('<form><input type=text placeholder="Send message to agent..."><button type=submit>Send</button><button type=button>Pull</button><button type=button>Push</button><button type=button>End'),qe=x("<div><div><h3>Task #</h3><button>Close</button></div><div>"),We=x("<div>Session started &middot; <!> &middot; "),He=x("<div>[<!>]"),_t=x("<div>"),Je=x("<div>$<!> &middot; <!>s &middot; <!> turns"),Ke=x("<div><strong>"),Qe=x("<details><summary>tool result"),Xe=x("<details><summary> tool calls: </summary><div>"),Ye=x("<details><summary></summary><pre>");function Ze(t){const[e,n]=W([]),[s,r]=W(""),[i,a]=W(!1);Et(()=>{const T=t.taskId;n([]);const b=le(T);b.addEventListener("message",_=>{try{const k=JSON.parse(_.data);n(C=>[...C,k])}catch{}}),Lt(()=>b.close())});async function l(){const T=s().trim();if(T){a(!0);try{await oe(t.taskId,{prompt:T}),r("")}finally{a(!1)}}}const c=()=>{const T=t.taskState;return T==="running"||T==="starting"||T==="waiting"},f=()=>t.taskState==="waiting";async function g(){await ae(t.taskId)}async function u(){await ce(t.taskId)}async function N(){await fe(t.taskId)}async function B(){await ue(t.taskId)}async function M(){await de(t.taskId)}async function F(){await he(t.taskId)}return(()=>{var T=qe(),b=T.firstChild,_=b.firstChild;_.firstChild;var k=_.nextSibling,C=b.nextSibling;return h(_,()=>t.taskId,null),k.$$click=()=>t.onClose(),h(C,y(et,{get each(){return e()},children:p=>y(ze,{msg:p})}),null),h(C,y(O,{get when(){return e().length===0},get children(){var p=Fe();return $(()=>d(p,v.placeholder)),p}}),null),h(T,y(O,{get when(){return c()},get children(){var p=Ve(),L=p.firstChild,D=L.nextSibling,J=D.nextSibling,V=J.nextSibling,X=V.nextSibling;return p.addEventListener("submit",o=>{o.preventDefault(),l()}),L.$$input=o=>r(o.currentTarget.value),J.$$click=()=>u(),V.$$click=()=>N(),h(p,y(O,{get when(){return f()},get children(){return[(()=>{var o=De();return o.$$click=()=>g(),$(()=>d(o,`${v.btn} ${v.btnGreen}`)),o})(),(()=>{var o=Ue();return o.$$click=()=>M(),$(()=>d(o,`${v.btn} ${v.btnGray}`)),o})(),(()=>{var o=je();return o.$$click=()=>F(),$(()=>d(o,`${v.btn} ${v.btnGray}`)),o})()]}}),X),X.$$click=()=>B(),$(o=>{var S=v.inputForm,I=i(),G=v.textInput,R=i()||!s().trim(),m=`${v.btn} ${v.btnGray}`,q=`${v.btn} ${v.btnGray}`,U=`${v.btn} ${v.btnRed}`;return S!==o.e&&d(p,o.e=S),I!==o.t&&(L.disabled=o.t=I),G!==o.a&&d(L,o.a=G),R!==o.o&&(D.disabled=o.o=R),m!==o.i&&d(J,o.i=m),q!==o.n&&d(V,o.n=q),U!==o.s&&d(X,o.s=U),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),$(()=>L.value=s()),p}}),null),$(p=>{var L=v.container,D=v.header,J=v.closeBtn,V=v.messageArea;return L!==p.e&&d(T,p.e=L),D!==p.t&&d(b,p.t=D),J!==p.a&&d(k,p.a=J),V!==p.o&&d(C,p.o=V),p},{e:void 0,t:void 0,a:void 0,o:void 0}),T})()}function ze(t){return y(Xt,{get children(){return[y(st,{get when(){return Yt(()=>t.msg.type==="system")()&&t.msg.subtype==="init"},get children(){var e=We(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,h(e,()=>t.msg.model,s),h(e,()=>t.msg.claude_code_version,null),$(()=>d(e,v.systemInit)),e}}),y(st,{get when(){return t.msg.type==="system"},get children(){var e=He(),n=e.firstChild,s=n.nextSibling;return s.nextSibling,h(e,()=>t.msg.subtype,s),$(()=>d(e,v.systemMsg)),e}}),y(st,{get when(){return t.msg.type==="assistant"},get children(){var e=_t();return h(e,y(et,{get each(){var n;return tn(((n=t.msg.message)==null?void 0:n.content)??[])},children:n=>y(O,{get when(){return n.type==="text"},get fallback(){return y(en,{get tools(){return n.blocks}})},get children(){return y(et,{get each(){return n.blocks},children:s=>(()=>{var r=_t();return h(r,()=>s.text),$(()=>d(r,v.textBlock)),r})()})}})})),$(()=>d(e,v.assistantMsg)),e}}),y(st,{get when(){return t.msg.type==="result"},get children(){var e=Ke(),n=e.firstChild;return h(n,()=>t.msg.is_error?"Error":"Done"),h(e,y(O,{get when(){return t.msg.result},get children(){var s=_t();return h(s,()=>t.msg.result),$(()=>d(s,v.resultText)),s}}),null),h(e,y(O,{get when(){return t.msg.total_cost_usd},get children(){var s=Je(),r=s.firstChild,i=r.nextSibling,a=i.nextSibling,l=a.nextSibling,c=l.nextSibling,f=c.nextSibling;return f.nextSibling,h(s,()=>{var g;return(g=t.msg.total_cost_usd)==null?void 0:g.toFixed(4)},i),h(s,()=>((t.msg.duration_ms??0)/1e3).toFixed(1),l),h(s,()=>t.msg.num_turns,f),$(()=>d(s,v.resultMeta)),s}}),null),$(()=>d(e,`${v.result} ${t.msg.is_error?v.resultError:v.resultSuccess}`)),e}}),y(st,{get when(){return t.msg.type==="user"},get children(){var e=Qe();return $(()=>d(e,v.toolResult)),e}})]}})}function tn(t){const e=[];for(const n of t){const s=n.type==="text"?"text":"tool_use",r=e[e.length-1];r&&r.type===s?r.blocks.push(n):e.push({type:s,blocks:[n]})}return e}function en(t){const e=()=>t.tools.map(s=>s.name??"tool"),n=()=>t.tools.length;return y(O,{get when(){return n()>1},get fallback(){return y(xt,{get name(){return t.tools[0].name??"tool"},get input(){return t.tools[0].input}})},get children(){var s=Xe(),r=s.firstChild,i=r.firstChild,a=r.nextSibling;return h(r,n,i),h(r,()=>e().join(", "),null),h(a,y(et,{get each(){return t.tools},children:l=>y(xt,{get name(){return l.name??"tool"},get input(){return l.input}})})),$(l=>{var c=v.toolGroup,f=v.toolGroupInner;return c!==l.e&&d(s,l.e=c),f!==l.t&&d(a,l.t=f),l},{e:void 0,t:void 0}),s}})}function xt(t){return(()=>{var e=Ye(),n=e.firstChild,s=n.nextSibling;return h(n,()=>t.name),h(s,()=>JSON.stringify(t.input,null,2)),$(r=>{var i=v.toolBlock,a=v.toolBlockPre;return i!==r.e&&d(e,r.e=i),a!==r.t&&d(s,r.t=a),r},{e:void 0,t:void 0}),e})()}Gt(["click","input"]);function nn(){"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()}function sn(){return"Notification"in window&&Notification.permission==="granted"}function rn(t,e){if(!sn()||document.visibilityState==="visible")return;const n=new Notification("Agent waiting for input",{body:`Task #${t}: ${e}`,tag:`wmao-waiting-${t}`});n.onclick=()=>{window.focus(),n.close()}}const ln="_app_17sc8_3",on="_titleRow_17sc8_10",an="_title_17sc8_10",un="_subtitle_17sc8_23",cn="_submitForm_17sc8_28",fn="_repoSelect_17sc8_35",dn="_promptInput_17sc8_39",hn="_layout_17sc8_44",gn="_taskList_17sc8_49",_n="_taskListCollapsed_17sc8_53",mn="_placeholder_17sc8_57",vn="_taskCard_17sc8_61",bn="_taskCardSelected_17sc8_69",pn="_taskHeader_17sc8_73",yn="_taskTitle_17sc8_78",$n="_stateBadge_17sc8_82",kn="_repoLabel_17sc8_88",wn="_branchLabel_17sc8_93",Sn="_costLabel_17sc8_98",xn="_errorLabel_17sc8_103",Tn="_detailPane_17sc8_108",Cn="_backBtn_17sc8_113",w={app:ln,titleRow:on,title:an,subtitle:un,submitForm:cn,repoSelect:fn,promptInput:dn,layout:hn,taskList:gn,taskListCollapsed:_n,placeholder:mn,taskCard:vn,taskCardSelected:bn,taskHeader:pn,taskTitle:yn,stateBadge:$n,repoLabel:kn,branchLabel:wn,costLabel:Sn,errorLabel:xn,detailPane:Tn,backBtn:Cn};var An=x("<p>No tasks yet."),En=x("<div><button>&larr; Back"),Ln=x('<div><div><h1>wmao</h1><span>Work my ass off. Manage coding agents.</span></div><form><select></select><input type=text placeholder="Describe a task..."><button type=submit></button></form><div><div><h2>Tasks'),In=x("<option>"),mt=x("<div>"),Bn=x("<span>$<!> &middot; <!>s"),Pn=x("<div><div><strong></strong><span>");function Nn(){const[t,e]=W(""),[n,s]=W([]),[r,i]=W(!1),[a,l]=W(null),[c,f]=W([]),[g,u]=W("");let N=new Map;jt(async()=>{nn();const b=await se();f(b),b.length>0&&u(b[0].path)});async function B(){const b=t().trim(),_=g();if(!(!b||!_)){i(!0);try{const k=await ie({prompt:b,repo:_});e(""),await M(),l(k.id)}finally{i(!1)}}}async function M(){const b=await re();for(const _ of b)_.state==="waiting"&&N.get(_.id)!=="waiting"&&rn(_.id,_.task);N=new Map(b.map(_=>[_.id,_.state])),s(b)}setInterval(M,5e3),M();const F=()=>[...n()].sort((b,_)=>{const k=b.task.startsWith("(adopted)")?1:0,C=_.task.startsWith("(adopted)")?1:0;return k!==C?k-C:_.id-b.id}),T=()=>{const b=a();return b===null?null:n().find(_=>_.id===b)??null};return(()=>{var b=Ln(),_=b.firstChild,k=_.firstChild,C=k.nextSibling,p=_.nextSibling,L=p.firstChild,D=L.nextSibling,J=D.nextSibling,V=p.nextSibling,X=V.firstChild;return X.firstChild,p.addEventListener("submit",o=>{o.preventDefault(),B()}),L.addEventListener("change",o=>u(o.currentTarget.value)),h(L,y(et,{get each(){return c()},children:o=>(()=>{var S=In();return h(S,()=>o.path),$(()=>S.value=o.path),S})()})),D.$$input=o=>e(o.currentTarget.value),h(J,()=>r()?"Submitting...":"Run"),h(X,y(O,{get when(){return n().length===0},get children(){var o=An();return $(()=>d(o,w.placeholder)),o}}),null),h(X,y(et,{get each(){return F()},children:o=>(()=>{var S=Pn(),I=S.firstChild,G=I.firstChild,R=G.nextSibling;return S.$$click=()=>l(o.id),h(G,()=>o.task),h(R,()=>o.state),h(S,y(O,{get when(){return o.repo},get children(){var m=mt();return h(m,()=>o.repo),$(()=>d(m,w.repoLabel)),m}}),null),h(S,y(O,{get when(){return o.branch},get children(){var m=mt();return h(m,()=>o.branch),$(()=>d(m,w.branchLabel)),m}}),null),h(S,y(O,{get when(){return o.costUSD>0},get children(){var m=Bn(),q=m.firstChild,U=q.nextSibling,z=U.nextSibling,Y=z.nextSibling;return Y.nextSibling,h(m,()=>o.costUSD.toFixed(4),U),h(m,()=>(o.durationMs/1e3).toFixed(1),Y),$(()=>d(m,w.costLabel)),m}}),null),h(S,y(O,{get when(){return o.error},get children(){var m=mt();return h(m,()=>o.error),$(()=>d(m,w.errorLabel)),m}}),null),$(m=>{var q=`${w.taskCard} ${a()===o.id?w.taskCardSelected:""}`,U=w.taskHeader,z=w.taskTitle,Y=w.stateBadge,nt=Mn(o.state);return q!==m.e&&d(S,m.e=q),U!==m.t&&d(I,m.t=U),z!==m.a&&d(G,m.a=z),Y!==m.o&&d(R,m.o=Y),nt!==m.i&&te(R,"background",m.i=nt),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),S})()}),null),h(V,y(O,{get when(){return a()!==null},get children(){var o=En(),S=o.firstChild;return S.$$click=()=>l(null),h(o,y(Ze,{get taskId(){return a()??0},get taskState(){var I;return((I=T())==null?void 0:I.state)??"pending"},onClose:()=>l(null)}),null),$(I=>{var G=w.detailPane,R=w.backBtn;return G!==I.e&&d(o,I.e=G),R!==I.t&&d(S,I.t=R),I},{e:void 0,t:void 0}),o}}),null),$(o=>{var S=w.app,I=w.titleRow,G=w.title,R=w.subtitle,m=w.submitForm,q=r(),U=w.repoSelect,z=r(),Y=w.promptInput,nt=r()||!t().trim()||!g(),yt=w.layout,$t=`${w.taskList} ${a()!==null?w.taskListCollapsed:""}`;return S!==o.e&&d(b,o.e=S),I!==o.t&&d(_,o.t=I),G!==o.a&&d(k,o.a=G),R!==o.o&&d(C,o.o=R),m!==o.i&&d(p,o.i=m),q!==o.n&&(L.disabled=o.n=q),U!==o.s&&d(L,o.s=U),z!==o.h&&(D.disabled=o.h=z),Y!==o.r&&d(D,o.r=Y),nt!==o.d&&(J.disabled=o.d=nt),yt!==o.l&&d(V,o.l=yt),$t!==o.u&&d(X,o.u=$t),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),$(()=>L.value=g()),$(()=>D.value=t()),b})()}function Mn(t){switch(t){case"done":return"#d4edda";case"failed":return"#f8d7da";case"ended":return"#e2e3e5";default:return"#fff3cd"}}Gt(["input","click"]);const Tt=document.getElementById("app");Tt&&zt(()=>y(Nn,{}),Tt);
